# ğŸ”„ æœåŠ¡è¿è¡Œæ¨¡å¼è¯´æ˜

## é—®é¢˜è¯´æ˜

ä½ é‡åˆ°çš„é—®é¢˜æ˜¯ï¼š**å…³é—­ç»ˆç«¯çª—å£åï¼ŒæœåŠ¡ä¹Ÿåœæ­¢äº†**ã€‚

è¿™æ˜¯å› ä¸ºåŸæ¥çš„ `start.fish` è„šæœ¬ä¸­ï¼Œå‰ç«¯æœåŠ¡æ˜¯åœ¨**å‰å°è¿è¡Œ**çš„ï¼Œå½“ä½ å…³é—­ç»ˆç«¯æ—¶ï¼Œå‰å°è¿›ç¨‹ä¼šè¢«ç»ˆæ­¢ã€‚

## ğŸ¯ è§£å†³æ–¹æ¡ˆ

æˆ‘ä»¬æä¾›äº†ä¸¤ç§å¯åŠ¨æ¨¡å¼ï¼š

### æ–¹å¼ 1ï¼šå‰å°æ¨¡å¼ï¼ˆåŸ start.fishï¼‰

**ç‰¹ç‚¹ï¼š**
- âœ… å¯ä»¥ç›´æ¥çœ‹åˆ°æ—¥å¿—è¾“å‡º
- âœ… Ctrl+C å¯ä»¥åœæ­¢æœåŠ¡
- âŒ å…³é—­ç»ˆç«¯ä¼šåœæ­¢æœåŠ¡
- âŒ ç»ˆç«¯è¢«å ç”¨ï¼Œæ— æ³•æ‰§è¡Œå…¶ä»–å‘½ä»¤

**ä½¿ç”¨åœºæ™¯ï¼š**
- å¼€å‘è°ƒè¯•æ—¶
- éœ€è¦å®æ—¶æŸ¥çœ‹æ—¥å¿—
- ä¸´æ—¶æµ‹è¯•

**å¯åŠ¨æ–¹å¼ï¼š**
```bash
./start.fish
```

**åœæ­¢æ–¹å¼ï¼š**
- æŒ‰ `Ctrl+C`
- æˆ–è¿è¡Œ `./stop.fish`

---

### æ–¹å¼ 2ï¼šåå°æ¨¡å¼ï¼ˆæ–° start_daemon.fishï¼‰â­ æ¨è

**ç‰¹ç‚¹ï¼š**
- âœ… å…³é—­ç»ˆç«¯åæœåŠ¡ç»§ç»­è¿è¡Œ
- âœ… ç»ˆç«¯å¯ä»¥æ‰§è¡Œå…¶ä»–å‘½ä»¤
- âœ… é€‚åˆé•¿æœŸè¿è¡Œ
- â„¹ï¸ æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶

**ä½¿ç”¨åœºæ™¯ï¼š**
- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- é•¿æœŸè¿è¡ŒæœåŠ¡
- éœ€è¦å…³é—­ç»ˆç«¯

**å¯åŠ¨æ–¹å¼ï¼š**
```bash
./start_daemon.fish
```

**åœæ­¢æ–¹å¼ï¼š**
```bash
./stop.fish
```

**æŸ¥çœ‹çŠ¶æ€ï¼š**
```bash
./status.fish
```

**æŸ¥çœ‹æ—¥å¿—ï¼š**
```bash
# åç«¯æ—¥å¿—
tail -f backend.log

# å‰ç«¯æ—¥å¿—
tail -f frontend.log
```

---

## ğŸ“‹ å‘½ä»¤å¯¹æ¯”

| å‘½ä»¤ | å‰å°æ¨¡å¼ | åå°æ¨¡å¼ |
|------|---------|---------|
| å¯åŠ¨ | `./start.fish` | `./start_daemon.fish` |
| åœæ­¢ | `Ctrl+C` æˆ– `./stop.fish` | `./stop.fish` |
| æŸ¥çœ‹çŠ¶æ€ | ç»ˆç«¯æ˜¾ç¤º | `./status.fish` |
| æŸ¥çœ‹æ—¥å¿— | ç»ˆç«¯æ˜¾ç¤º | `tail -f backend.log` |
| å…³é—­ç»ˆç«¯ | âŒ æœåŠ¡åœæ­¢ | âœ… æœåŠ¡ç»§ç»­ |

---

## ğŸš€ æ¨èä½¿ç”¨æµç¨‹

### å¼€å‘ç¯å¢ƒï¼ˆéœ€è¦çœ‹æ—¥å¿—ï¼‰

```bash
# 1. å¯åŠ¨æœåŠ¡ï¼ˆå‰å°æ¨¡å¼ï¼‰
./start.fish

# 2. åœ¨æµè§ˆå™¨æµ‹è¯•
# http://localhost:8080/admin.html

# 3. å®ŒæˆåæŒ‰ Ctrl+C åœæ­¢
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆåå°è¿è¡Œï¼‰

```bash
# 1. å¯åŠ¨æœåŠ¡ï¼ˆåå°æ¨¡å¼ï¼‰
./start_daemon.fish

# 2. æŸ¥çœ‹çŠ¶æ€
./status.fish

# 3. å¦‚éœ€æŸ¥çœ‹æ—¥å¿—
tail -f backend.log

# 4. å…³é—­ç»ˆç«¯ï¼ˆæœåŠ¡ç»§ç»­è¿è¡Œï¼‰
exit

# 5. éœ€è¦åœæ­¢æ—¶ï¼Œé‡æ–°æ‰“å¼€ç»ˆç«¯
cd /home/cysheper/Code/web/comments
./stop.fish
```

---

## ğŸ”§ è¯¦ç»†è¯´æ˜

### nohup å‘½ä»¤

åå°æ¨¡å¼ä½¿ç”¨äº† `nohup` å‘½ä»¤ï¼š

```bash
nohup python main.py > backend.log 2>&1 &
```

- `nohup` - å¿½ç•¥æŒ‚æ–­ä¿¡å·ï¼ˆå…³é—­ç»ˆç«¯æ—¶ä¸ç»ˆæ­¢è¿›ç¨‹ï¼‰
- `> backend.log` - æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶
- `2>&1` - æ ‡å‡†é”™è¯¯ä¹Ÿé‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶
- `&` - åå°è¿è¡Œ

### PID æ–‡ä»¶

ç³»ç»Ÿä¼šåˆ›å»º PID æ–‡ä»¶æ¥è¿½è¸ªè¿›ç¨‹ï¼š

- `.backend.pid` - åç«¯è¿›ç¨‹ ID
- `.frontend.pid` - å‰ç«¯è¿›ç¨‹ ID

è¿™äº›æ–‡ä»¶ç”¨äºï¼š
- åœæ­¢æœåŠ¡æ—¶æ‰¾åˆ°å¯¹åº”è¿›ç¨‹
- æŸ¥çœ‹çŠ¶æ€æ—¶æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿è¡Œ

### æ—¥å¿—æ–‡ä»¶

åå°æ¨¡å¼ä¼šåˆ›å»ºæ—¥å¿—æ–‡ä»¶ï¼š

- `backend.log` - åç«¯æ—¥å¿—
- `frontend.log` - å‰ç«¯æ—¥å¿—

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### å¯åŠ¨åå°æœåŠ¡
```bash
./start_daemon.fish
```

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
./status.fish
```

### åœæ­¢æ‰€æœ‰æœåŠ¡
```bash
./stop.fish
```

### å®æ—¶æŸ¥çœ‹åç«¯æ—¥å¿—
```bash
tail -f backend.log
```

### å®æ—¶æŸ¥çœ‹å‰ç«¯æ—¥å¿—
```bash
tail -f frontend.log
```

### æŸ¥çœ‹è¿›ç¨‹
```bash
# æŸ¥çœ‹ Python è¿›ç¨‹
ps aux | grep python

# æŸ¥çœ‹ç‰¹å®šç«¯å£
lsof -i :8000  # åç«¯
lsof -i :8080  # å‰ç«¯
```

### æ‰‹åŠ¨åœæ­¢è¿›ç¨‹
```bash
# é€šè¿‡ PID åœæ­¢
kill $(cat .backend.pid)
kill $(cat .frontend.pid)

# é€šè¿‡è¿›ç¨‹ååœæ­¢
pkill -f "python main.py"
pkill -f "python -m http.server 8080"
```

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•çŸ¥é“æœåŠ¡æ˜¯å¦åœ¨è¿è¡Œï¼Ÿ

**A:** è¿è¡ŒçŠ¶æ€æ£€æŸ¥å‘½ä»¤ï¼š
```bash
./status.fish
```

### Q: å…³é—­ç»ˆç«¯åå¦‚ä½•æŸ¥çœ‹æ—¥å¿—ï¼Ÿ

**A:** é‡æ–°æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ï¼š
```bash
cd /home/cysheper/Code/web/comments
tail -f backend.log
```

### Q: å¦‚ä½•é‡å¯æœåŠ¡ï¼Ÿ

**A:** åœæ­¢å†å¯åŠ¨ï¼š
```bash
./stop.fish
./start_daemon.fish
```

### Q: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ

**A:** åœæ­¢ç°æœ‰æœåŠ¡ï¼š
```bash
./stop.fish
# æˆ–å¼ºåˆ¶åœæ­¢
pkill -f "python main.py"
pkill -f "python -m http.server 8080"
```

### Q: ä¿®æ”¹ä»£ç åéœ€è¦é‡å¯å—ï¼Ÿ

**A:** æ˜¯çš„ï¼Œéœ€è¦é‡å¯æœåŠ¡ï¼š
```bash
./stop.fish
./start_daemon.fish
```

---

## ğŸ’¡ æ¨èé…ç½®

### å¼€å‘ç¯å¢ƒ
ä½¿ç”¨å‰å°æ¨¡å¼ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼š
```bash
./start.fish
```

### æµ‹è¯•ç¯å¢ƒ
ä½¿ç”¨åå°æ¨¡å¼ï¼Œå®šæœŸæŸ¥çœ‹æ—¥å¿—ï¼š
```bash
./start_daemon.fish
./status.fish
```

### ç”Ÿäº§ç¯å¢ƒ
ä½¿ç”¨åå°æ¨¡å¼ + è¿›ç¨‹ç®¡ç†å·¥å…·ï¼ˆå¦‚ systemdã€supervisorï¼‰

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

```bash
# å‰å°å¯åŠ¨ï¼ˆå¼€å‘ç”¨ï¼‰
./start.fish              # å¯åŠ¨å‰å°æœåŠ¡
Ctrl+C                    # åœæ­¢æœåŠ¡

# åå°å¯åŠ¨ï¼ˆç”Ÿäº§ç”¨ï¼‰
./start_daemon.fish       # åå°å¯åŠ¨
./status.fish             # æŸ¥çœ‹çŠ¶æ€
./stop.fish               # åœæ­¢æœåŠ¡
tail -f backend.log       # æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f frontend.log      # æŸ¥çœ‹å‰ç«¯æ—¥å¿—
```

---

**æ€»ç»“ï¼šå¦‚æœéœ€è¦å…³é—­ç»ˆç«¯åæœåŠ¡ç»§ç»­è¿è¡Œï¼Œè¯·ä½¿ç”¨ `./start_daemon.fish`ï¼** ğŸš€
